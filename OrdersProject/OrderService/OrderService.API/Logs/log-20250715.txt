2025-07-15 09:28:57.142 +03:00 [INF] User profile is available. Using 'C:\Users\karim.elfil\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-15 09:28:57.332 +03:00 [INF] Now listening on: https://localhost:7096
2025-07-15 09:28:57.335 +03:00 [INF] Now listening on: http://localhost:5102
2025-07-15 09:28:57.411 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-15 09:28:57.413 +03:00 [INF] Hosting environment: Development
2025-07-15 09:28:57.415 +03:00 [INF] Content root path: C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API
2025-07-15 09:29:03.400 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-07-15 09:29:03.653 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 256.4792ms
2025-07-15 09:29:03.662 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 09:29:03.670 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 8.2583ms
2025-07-15 09:29:03.679 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-07-15 09:29:03.751 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.111ms
2025-07-15 09:29:03.907 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 09:29:03.939 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.6667ms
2025-07-15 09:30:26.922 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/Service - application/json 458
2025-07-15 09:30:27.586 +03:00 [INF] CORS policy execution failed.
2025-07-15 09:30:27.588 +03:00 [INF] Request origin https://localhost:7096 does not have permission to access the resource.
2025-07-15 09:30:28.465 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 09:30:29.009 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[OrderService.Domain.Model.Order.OrderResponseDto]] CreateOrder(OrderService.Domain.Model.Order.CreateOrderDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 09:30:30.844 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 1708.1869ms
2025-07-15 09:30:30.848 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 09:30:30.850 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Connection is not open
   at Npgsql.ThrowHelper.ThrowInvalidOperationException(String message)
   at Npgsql.NpgsqlConnection.CheckReady()
   at Npgsql.NpgsqlConnection.BeginTransaction(Boolean async, IsolationLevel level, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.BeginTransaction(IsolationLevel level)
   at Npgsql.NpgsqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at OrderService.Business.Services.OrderService.CreateOrderAsync(CreateOrderDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrderService .cs:line 25
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 23
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15 09:30:30.910 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/Service - 500 null text/plain; charset=utf-8 3988.2115ms
2025-07-15 10:14:30.704 +03:00 [INF] User profile is available. Using 'C:\Users\karim.elfil\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-15 10:14:30.903 +03:00 [INF] Now listening on: https://localhost:7096
2025-07-15 10:14:30.906 +03:00 [INF] Now listening on: http://localhost:5102
2025-07-15 10:14:31.012 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-15 10:14:31.014 +03:00 [INF] Hosting environment: Development
2025-07-15 10:14:31.015 +03:00 [INF] Content root path: C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API
2025-07-15 10:14:31.838 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-07-15 10:14:31.996 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 158.4431ms
2025-07-15 10:14:32.022 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 10:14:32.022 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-07-15 10:14:32.031 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 9.5357ms
2025-07-15 10:14:32.066 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.6428ms
2025-07-15 10:14:32.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 10:14:32.287 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate schema for type - OrderService.Domain.Model.Order.CreateOrderRequestDto. See inner exception
 ---> System.InvalidOperationException: Can't use schemaId "$CreateOrderItemDto" for type "$OrderService.Domain.Model.Order.CreateOrderItemDto". The same schemaId is already used for type "$OrderService.Domain.Model.CreateOrderItemDto"
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaRepository.RegisterType(Type type, String schemaId)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForType(Type modelType, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateArraySchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__1()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForParameter(Type modelType, SchemaRepository schemaRepository, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateRequestBodyFromBodyParameter(ApiDescription apiDescription, SchemaRepository schemaRepository, ApiParameterDescription bodyParameter)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateRequestBodyAndFilterContext(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateRequestBodyAsync(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`4 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15 10:14:32.301 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 35.6365ms
2025-07-15 10:14:40.973 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-07-15 10:14:40.985 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 12.4314ms
2025-07-15 10:14:40.998 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 10:14:40.998 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-07-15 10:14:41.003 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 4.55ms
2025-07-15 10:14:41.016 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.8189ms
2025-07-15 10:14:41.081 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 10:14:41.096 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate schema for type - OrderService.Domain.Model.Order.CreateOrderRequestDto. See inner exception
 ---> System.InvalidOperationException: Can't use schemaId "$CreateOrderItemDto" for type "$OrderService.Domain.Model.Order.CreateOrderItemDto". The same schemaId is already used for type "$OrderService.Domain.Model.CreateOrderItemDto"
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaRepository.RegisterType(Type type, String schemaId)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForType(Type modelType, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateArraySchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__1()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForParameter(Type modelType, SchemaRepository schemaRepository, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateRequestBodyFromBodyParameter(ApiDescription apiDescription, SchemaRepository schemaRepository, ApiParameterDescription bodyParameter)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateRequestBodyAndFilterContext(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateRequestBodyAsync(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`4 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15 10:14:41.108 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 26.8491ms
2025-07-15 10:17:48.161 +03:00 [INF] User profile is available. Using 'C:\Users\karim.elfil\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-15 10:17:48.351 +03:00 [INF] Now listening on: https://localhost:7096
2025-07-15 10:17:48.354 +03:00 [INF] Now listening on: http://localhost:5102
2025-07-15 10:17:48.448 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-15 10:17:48.450 +03:00 [INF] Hosting environment: Development
2025-07-15 10:17:48.452 +03:00 [INF] Content root path: C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API
2025-07-15 10:17:49.209 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-07-15 10:17:49.402 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 193.9286ms
2025-07-15 10:17:49.430 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 10:17:49.430 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-07-15 10:17:49.440 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 9.9935ms
2025-07-15 10:17:49.474 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.5836ms
2025-07-15 10:17:49.628 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 10:17:49.647 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate schema for type - OrderService.Domain.Model.Order.CreateOrderRequestDto. See inner exception
 ---> System.InvalidOperationException: Can't use schemaId "$CreateOrderItemDto" for type "$OrderService.Domain.Model.Order.CreateOrderItemDto". The same schemaId is already used for type "$OrderService.Domain.Model.CreateOrderItemDto"
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaRepository.RegisterType(Type type, String schemaId)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForType(Type modelType, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateArraySchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__1()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForParameter(Type modelType, SchemaRepository schemaRepository, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateRequestBodyFromBodyParameter(ApiDescription apiDescription, SchemaRepository schemaRepository, ApiParameterDescription bodyParameter)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateRequestBodyAndFilterContext(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateRequestBodyAsync(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`4 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15 10:17:49.662 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 34.2543ms
2025-07-15 10:18:01.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 10:18:01.376 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate schema for type - OrderService.Domain.Model.Order.CreateOrderRequestDto. See inner exception
 ---> System.InvalidOperationException: Can't use schemaId "$CreateOrderItemDto" for type "$OrderService.Domain.Model.Order.CreateOrderItemDto". The same schemaId is already used for type "$OrderService.Domain.Model.CreateOrderItemDto"
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaRepository.RegisterType(Type type, String schemaId)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForType(Type modelType, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateArraySchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__1()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForParameter(Type modelType, SchemaRepository schemaRepository, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateRequestBodyFromBodyParameter(ApiDescription apiDescription, SchemaRepository schemaRepository, ApiParameterDescription bodyParameter)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateRequestBodyAndFilterContext(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateRequestBodyAsync(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`4 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15 10:18:01.466 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 500 null text/html; charset=utf-8 134.056ms
2025-07-15 10:18:01.491 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 10:18:01.493 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-07-15 10:18:01.496 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 4.9363ms
2025-07-15 10:18:01.515 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.333ms
2025-07-15 10:18:01.694 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/favicon.ico - null null
2025-07-15 10:18:01.798 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/favicon.ico - 404 0 null 103.5294ms
2025-07-15 10:18:01.806 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7096/favicon.ico, Response status code: 404
2025-07-15 10:20:34.023 +03:00 [INF] User profile is available. Using 'C:\Users\karim.elfil\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-15 10:20:34.228 +03:00 [INF] Now listening on: https://localhost:7096
2025-07-15 10:20:34.230 +03:00 [INF] Now listening on: http://localhost:5102
2025-07-15 10:20:34.340 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-15 10:20:34.342 +03:00 [INF] Hosting environment: Development
2025-07-15 10:20:34.343 +03:00 [INF] Content root path: C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API
2025-07-15 10:20:34.400 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 10:20:34.493 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 94.0048ms
2025-07-15 10:20:40.172 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-07-15 10:20:40.232 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 60.0923ms
2025-07-15 10:20:40.241 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 10:20:40.242 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-07-15 10:20:40.252 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 10.1073ms
2025-07-15 10:20:40.275 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.3352ms
2025-07-15 10:20:40.304 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 10:20:40.315 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.2688ms
2025-07-15 10:21:10.081 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders - application/json 259
2025-07-15 10:21:10.105 +03:00 [INF] CORS policy execution failed.
2025-07-15 10:21:10.108 +03:00 [INF] Request origin https://localhost:7096 does not have permission to access the resource.
2025-07-15 10:21:10.145 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:21:10.178 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 10:21:10.191 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-15 10:21:10.195 +03:00 [INF] Authorization failed for the request at filter 'Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter'.
2025-07-15 10:21:10.202 +03:00 [INF] Executing ChallengeResult with authentication schemes ([]).
2025-07-15 10:21:10.213 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-15 10:21:10.221 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 32.3984ms
2025-07-15 10:21:10.226 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:21:10.230 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders - 401 0 null 149.0883ms
2025-07-15 10:21:36.979 +03:00 [INF] User profile is available. Using 'C:\Users\karim.elfil\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-15 10:21:37.185 +03:00 [INF] Now listening on: https://localhost:7096
2025-07-15 10:21:37.187 +03:00 [INF] Now listening on: http://localhost:5102
2025-07-15 10:21:37.286 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-15 10:21:37.288 +03:00 [INF] Hosting environment: Development
2025-07-15 10:21:37.290 +03:00 [INF] Content root path: C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API
2025-07-15 10:21:37.512 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-07-15 10:21:37.657 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 146.7891ms
2025-07-15 10:21:37.666 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 10:21:37.666 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-07-15 10:21:37.674 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 7.418ms
2025-07-15 10:21:37.698 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.7326ms
2025-07-15 10:21:37.749 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 10:21:37.775 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.5832ms
2025-07-15 10:21:56.241 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders - application/json 247
2025-07-15 10:21:56.265 +03:00 [INF] CORS policy execution failed.
2025-07-15 10:21:56.268 +03:00 [INF] Request origin https://localhost:7096 does not have permission to access the resource.
2025-07-15 10:21:56.310 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:21:56.341 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 10:21:57.350 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 10:21:57.365 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 1012.8031ms
2025-07-15 10:21:57.369 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:21:57.371 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders - 500 null application/json; charset=utf-8 1130.0239ms
2025-07-15 10:24:31.749 +03:00 [INF] User profile is available. Using 'C:\Users\karim.elfil\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-15 10:24:31.921 +03:00 [INF] Now listening on: https://localhost:7096
2025-07-15 10:24:31.924 +03:00 [INF] Now listening on: http://localhost:5102
2025-07-15 10:24:32.117 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-15 10:24:32.120 +03:00 [INF] Hosting environment: Development
2025-07-15 10:24:32.121 +03:00 [INF] Content root path: C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API
2025-07-15 10:24:32.251 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-07-15 10:24:32.403 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 153.3888ms
2025-07-15 10:24:32.551 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 10:24:32.551 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-07-15 10:24:32.561 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 10.3127ms
2025-07-15 10:24:32.593 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.375ms
2025-07-15 10:24:32.659 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 10:24:32.691 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.0435ms
2025-07-15 10:24:45.983 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders - application/json 270
2025-07-15 10:24:46.008 +03:00 [INF] CORS policy execution failed.
2025-07-15 10:24:46.011 +03:00 [INF] Request origin https://localhost:7096 does not have permission to access the resource.
2025-07-15 10:24:46.015 +03:00 [INF] CORS policy execution successful.
2025-07-15 10:24:46.053 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:24:46.088 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 10:24:46.716 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 10:24:46.731 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 633.5949ms
2025-07-15 10:24:46.735 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:24:46.737 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders - 500 null application/json; charset=utf-8 754.1666ms
2025-07-15 10:33:14.455 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 10:33:14.474 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 19.0712ms
2025-07-15 10:33:40.057 +03:00 [INF] User profile is available. Using 'C:\Users\karim.elfil\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-15 10:33:40.297 +03:00 [INF] Now listening on: https://localhost:7096
2025-07-15 10:33:40.301 +03:00 [INF] Now listening on: http://localhost:5102
2025-07-15 10:33:40.520 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-15 10:33:40.527 +03:00 [INF] Hosting environment: Development
2025-07-15 10:33:40.530 +03:00 [INF] Content root path: C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API
2025-07-15 10:33:40.606 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-07-15 10:33:40.758 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 152.8654ms
2025-07-15 10:33:40.902 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 10:33:40.902 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-07-15 10:33:40.909 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 7.0959ms
2025-07-15 10:33:40.935 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.299ms
2025-07-15 10:33:40.993 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 10:33:41.018 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 25.2568ms
2025-07-15 10:33:46.546 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 10:33:46.581 +03:00 [INF] CORS policy execution successful.
2025-07-15 10:33:46.619 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:33:46.635 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:33:46.638 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Multiple constructors accepting all given argument types have been found in type 'OrderService.API.Controllers.ServiceController'. There should only be one applicable constructor.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.TryFindMatchingConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& parameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfoEx[] constructors, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.CreateActivator(ControllerActionDescriptor descriptor)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.CreateControllerFactory(ControllerActionDescriptor descriptor)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerCache.GetCachedResult(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerRequestDelegateFactory.<>c__DisplayClass12_0.<CreateRequestDelegate>b__0(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15 10:33:46.663 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null text/plain; charset=utf-8 117.2825ms
2025-07-15 10:35:44.431 +03:00 [INF] User profile is available. Using 'C:\Users\karim.elfil\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-15 10:35:44.623 +03:00 [INF] Now listening on: https://localhost:7096
2025-07-15 10:35:44.626 +03:00 [INF] Now listening on: http://localhost:5102
2025-07-15 10:35:44.839 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-15 10:35:44.842 +03:00 [INF] Hosting environment: Development
2025-07-15 10:35:44.844 +03:00 [INF] Content root path: C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API
2025-07-15 10:35:44.971 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-07-15 10:35:45.113 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 142.9891ms
2025-07-15 10:35:45.258 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 10:35:45.258 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-07-15 10:35:45.264 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 6.6942ms
2025-07-15 10:35:45.289 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.0875ms
2025-07-15 10:35:45.358 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 10:35:45.390 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.8243ms
2025-07-15 10:35:50.529 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 10:35:50.563 +03:00 [INF] CORS policy execution successful.
2025-07-15 10:35:50.601 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:35:50.628 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 10:35:50.639 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-15 10:35:50.642 +03:00 [INF] Authorization failed for the request at filter 'Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter'.
2025-07-15 10:35:50.646 +03:00 [INF] Executing ChallengeResult with authentication schemes ([]).
2025-07-15 10:35:50.653 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-15 10:35:50.660 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 23.8134ms
2025-07-15 10:35:50.663 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:35:50.665 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 401 0 null 135.9938ms
2025-07-15 10:36:04.157 +03:00 [INF] User profile is available. Using 'C:\Users\karim.elfil\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-15 10:36:04.314 +03:00 [INF] Now listening on: https://localhost:7096
2025-07-15 10:36:04.317 +03:00 [INF] Now listening on: http://localhost:5102
2025-07-15 10:36:04.400 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-15 10:36:04.401 +03:00 [INF] Hosting environment: Development
2025-07-15 10:36:04.403 +03:00 [INF] Content root path: C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API
2025-07-15 10:36:04.722 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-07-15 10:36:04.868 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 148.6463ms
2025-07-15 10:36:04.877 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-07-15 10:36:04.877 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 10:36:04.888 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 10.8521ms
2025-07-15 10:36:04.914 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.2713ms
2025-07-15 10:36:04.966 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 10:36:04.985 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 19.3941ms
2025-07-15 10:36:09.846 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 10:36:09.868 +03:00 [INF] CORS policy execution successful.
2025-07-15 10:36:09.895 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:36:09.919 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 10:36:10.429 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42883: function orders.sp_create_customer(text, text, text, text, text, timestamp with time zone) does not exist

POSITION: 8
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteScalar(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteScalarImplAsync[T](IDbConnection cnn, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 1241
   at OrderService.Persistence.Repositories.ServiceRepository.CreateCustomerAsync(String firstName, String lastName, String email, String phone, String createdBy) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 29
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 23
  Exception data:
    Severity: ERROR
    SqlState: 42883
    MessageText: function orders.sp_create_customer(text, text, text, text, text, timestamp with time zone) does not exist
    Hint: No function matches the given name and argument types. You might need to add explicit type casts.
    Position: 8
    File: parse_func.c
    Line: 636
    Routine: ParseFuncOrColumn
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 10:36:10.523 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 10:36:10.539 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 614.5861ms
2025-07-15 10:36:10.542 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:36:10.545 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 698.5218ms
2025-07-15 10:38:36.107 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 10:38:36.112 +03:00 [INF] CORS policy execution successful.
2025-07-15 10:38:36.114 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:38:36.116 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 10:38:36.136 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "first_name" of relation "Customer" does not exist
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.<ReadMessage>g__ReadMessageSequential|49_0(NpgsqlConnector connector, Boolean async)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteScalar(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteScalarImplAsync[T](IDbConnection cnn, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 1241
   at OrderService.Persistence.Repositories.ServiceRepository.CreateCustomerAsync(String firstName, String lastName, String email, String phone, String createdBy) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 29
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 23
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "first_name" of relation "Customer" does not exist
    InternalPosition: 31
    InternalQuery: INSERT INTO orders."Customer"(first_name, last_name, email, phone, created_by, created_date, is_active)
    VALUES (p_first_name, p_last_name, p_email, p_phone, p_created_by, p_created_date, true)
    RETURNING customer_id
    Where: PL/pgSQL function sp_create_customer(text,text,text,text,text,timestamp with time zone) line 5 at SQL statement
    File: parse_target.c
    Line: 1070
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 10:38:36.153 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 10:38:36.158 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 38.7228ms
2025-07-15 10:38:36.161 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:38:36.165 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 57.2266ms
2025-07-15 10:40:36.981 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 10:40:36.985 +03:00 [INF] CORS policy execution successful.
2025-07-15 10:40:36.988 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:40:36.992 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 10:40:37.000 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "customer_id" does not exist
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.<ReadMessage>g__ReadMessageSequential|49_0(NpgsqlConnector connector, Boolean async)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteScalar(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteScalarImplAsync[T](IDbConnection cnn, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 1241
   at OrderService.Persistence.Repositories.ServiceRepository.CreateCustomerAsync(String firstName, String lastName, String email, String phone, String createdBy) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 29
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 23
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "customer_id" does not exist
    Hint: Perhaps you meant to reference the column "Customer.CustomerId".
    InternalPosition: 221
    InternalQuery: INSERT INTO orders."Customer"("FirstName", "LastName", "Email", "Phone", "CreatedBy", "CreatedDate", "IsActive")
    VALUES (p_first_name, p_last_name, p_email, p_phone, p_created_by, p_created_date, true)
    RETURNING customer_id
    Where: PL/pgSQL function sp_create_customer(text,text,text,text,text,timestamp with time zone) line 5 at SQL statement
    File: parse_relation.c
    Line: 3732
    Routine: errorMissingColumn
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 10:40:37.014 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 10:40:37.018 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 21.8153ms
2025-07-15 10:40:37.021 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:40:37.025 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 44.1236ms
2025-07-15 10:41:24.305 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 10:41:24.314 +03:00 [INF] CORS policy execution successful.
2025-07-15 10:41:24.316 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:41:24.320 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 10:41:24.532 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42883: function orders.sp_create_orderr(integer, timestamp with time zone, timestamp with time zone) does not exist

POSITION: 8
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteScalar(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteScalarImplAsync[T](IDbConnection cnn, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 1241
   at OrderService.Persistence.Repositories.ServiceRepository.CreateOrderAsync(Int32 customerId, DateTime orderDate, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 47
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 26
  Exception data:
    Severity: ERROR
    SqlState: 42883
    MessageText: function orders.sp_create_orderr(integer, timestamp with time zone, timestamp with time zone) does not exist
    Hint: No function matches the given name and argument types. You might need to add explicit type casts.
    Position: 8
    File: parse_func.c
    Line: 636
    Routine: ParseFuncOrColumn
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 10:41:24.546 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 10:41:24.550 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 225.9916ms
2025-07-15 10:41:24.553 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:41:24.555 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 250.3116ms
2025-07-15 10:44:52.575 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 10:44:52.579 +03:00 [INF] CORS policy execution successful.
2025-07-15 10:44:52.581 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:44:52.583 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 10:44:52.590 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42883: function orders.sp_create_orderr(integer, timestamp with time zone, timestamp with time zone) does not exist

POSITION: 8
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteScalar(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteScalarImplAsync[T](IDbConnection cnn, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 1241
   at OrderService.Persistence.Repositories.ServiceRepository.CreateOrderAsync(Int32 customerId, DateTime orderDate, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 47
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 26
  Exception data:
    Severity: ERROR
    SqlState: 42883
    MessageText: function orders.sp_create_orderr(integer, timestamp with time zone, timestamp with time zone) does not exist
    Hint: No function matches the given name and argument types. You might need to add explicit type casts.
    Position: 8
    File: parse_func.c
    Line: 636
    Routine: ParseFuncOrColumn
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 10:44:52.603 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 10:44:52.609 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 22.6368ms
2025-07-15 10:44:52.612 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:44:52.615 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 39.7789ms
2025-07-15 10:46:23.025 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 10:46:23.028 +03:00 [INF] CORS policy execution successful.
2025-07-15 10:46:23.029 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:46:23.031 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 10:46:23.038 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42883: function orders.sp_create_orderr(integer, timestamp with time zone, timestamp with time zone) does not exist

POSITION: 8
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteScalar(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteScalarImplAsync[T](IDbConnection cnn, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 1241
   at OrderService.Persistence.Repositories.ServiceRepository.CreateOrderAsync(Int32 customerId, DateTime orderDate, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 47
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 26
  Exception data:
    Severity: ERROR
    SqlState: 42883
    MessageText: function orders.sp_create_orderr(integer, timestamp with time zone, timestamp with time zone) does not exist
    Hint: No function matches the given name and argument types. You might need to add explicit type casts.
    Position: 8
    File: parse_func.c
    Line: 636
    Routine: ParseFuncOrColumn
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 10:46:23.052 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 10:46:23.054 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 21.1131ms
2025-07-15 10:46:23.056 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 10:46:23.058 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 33.1463ms
2025-07-15 11:29:09.300 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 11:29:09.305 +03:00 [INF] CORS policy execution successful.
2025-07-15 11:29:09.306 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 11:29:09.307 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 11:29:09.763 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42883: function orders.sp_create_orderr(integer, timestamp with time zone, timestamp with time zone) does not exist

POSITION: 8
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteScalar(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteScalarImplAsync[T](IDbConnection cnn, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 1241
   at OrderService.Persistence.Repositories.ServiceRepository.CreateOrderAsync(Int32 customerId, DateTime orderDate, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 47
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 26
  Exception data:
    Severity: ERROR
    SqlState: 42883
    MessageText: function orders.sp_create_orderr(integer, timestamp with time zone, timestamp with time zone) does not exist
    Hint: No function matches the given name and argument types. You might need to add explicit type casts.
    Position: 8
    File: parse_func.c
    Line: 636
    Routine: ParseFuncOrColumn
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 11:29:09.771 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 11:29:09.773 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 463.8531ms
2025-07-15 11:29:09.775 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 11:29:09.777 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 475.9287ms
2025-07-15 13:02:24.501 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 13:02:24.768 +03:00 [INF] CORS policy execution successful.
2025-07-15 13:02:24.774 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:02:24.781 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 13:14:24.634 +03:00 [INF] User profile is available. Using 'C:\Users\karim.elfil\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-15 13:14:24.997 +03:00 [INF] Now listening on: https://localhost:7096
2025-07-15 13:14:25.000 +03:00 [INF] Now listening on: http://localhost:5102
2025-07-15 13:14:25.265 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-15 13:14:25.268 +03:00 [INF] Hosting environment: Development
2025-07-15 13:14:25.270 +03:00 [INF] Content root path: C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API
2025-07-15 13:14:26.556 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-07-15 13:14:26.973 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 419.4111ms
2025-07-15 13:14:27.021 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 13:14:27.026 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-07-15 13:14:27.034 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 12.7291ms
2025-07-15 13:14:27.118 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 91.8104ms
2025-07-15 13:14:27.192 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 13:14:27.295 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 103.4141ms
2025-07-15 13:14:29.273 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 13:14:29.283 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 9.9109ms
2025-07-15 13:14:29.433 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/favicon.ico - null null
2025-07-15 13:14:29.548 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 13:14:29.585 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 37.0423ms
2025-07-15 13:14:29.603 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/favicon.ico - 404 0 null 169.7856ms
2025-07-15 13:14:29.633 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7096/favicon.ico, Response status code: 404
2025-07-15 13:14:35.333 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 13:14:35.345 +03:00 [INF] CORS policy execution successful.
2025-07-15 13:14:35.351 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:14:35.438 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 13:14:38.369 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42883: function orders.sp_create_orderr(integer, timestamp with time zone, timestamp with time zone) does not exist

POSITION: 8
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteScalar(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteScalarImplAsync[T](IDbConnection cnn, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 1241
   at OrderService.Persistence.Repositories.ServiceRepository.CreateOrderAsync(Int32 customerId, DateTime orderDate, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 47
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 26
  Exception data:
    Severity: ERROR
    SqlState: 42883
    MessageText: function orders.sp_create_orderr(integer, timestamp with time zone, timestamp with time zone) does not exist
    Hint: No function matches the given name and argument types. You might need to add explicit type casts.
    Position: 8
    File: parse_func.c
    Line: 636
    Routine: ParseFuncOrColumn
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 13:14:38.613 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 13:14:38.710 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 3261.1008ms
2025-07-15 13:14:38.714 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:14:38.717 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 3384.1458ms
2025-07-15 13:18:49.797 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 13:18:49.802 +03:00 [INF] CORS policy execution successful.
2025-07-15 13:18:49.805 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:18:49.808 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 13:18:49.825 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "id" does not exist
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.<ReadMessage>g__ReadMessageSequential|49_0(NpgsqlConnector connector, Boolean async)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteScalar(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteScalarImplAsync[T](IDbConnection cnn, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 1241
   at OrderService.Persistence.Repositories.ServiceRepository.CreateOrderAsync(Int32 customerId, DateTime orderDate, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 47
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 26
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "id" does not exist
    InternalPosition: 142
    InternalQuery: INSERT INTO orders.orderrs ("CustomerId", "OrderDate", "CreatedDate")
    VALUES (p_customer_id, p_order_date, p_created_date)
    RETURNING id
    Where: PL/pgSQL function sp_create_orderr(integer,timestamp with time zone,timestamp with time zone) line 5 at SQL statement
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 13:18:49.843 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 13:18:49.847 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 35.1892ms
2025-07-15 13:18:49.850 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:18:49.853 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 54.3589ms
2025-07-15 13:20:55.494 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 13:20:55.498 +03:00 [INF] CORS policy execution successful.
2025-07-15 13:20:55.500 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:20:55.501 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 13:20:55.631 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 23502: null value in column "IsActive" of relation "orderrs" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.<ReadMessage>g__ReadMessageSequential|49_0(NpgsqlConnector connector, Boolean async)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteScalar(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteScalarImplAsync[T](IDbConnection cnn, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 1241
   at OrderService.Persistence.Repositories.ServiceRepository.CreateOrderAsync(Int32 customerId, DateTime orderDate, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 47
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 26
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "IsActive" of relation "orderrs" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    Where: SQL statement "INSERT INTO orders.orderrs ("CustomerId", "OrderDate", "CreatedDate")
    VALUES (p_customer_id, p_order_date, p_created_date)
    RETURNING "OrderId""
PL/pgSQL function sp_create_orderr(integer,timestamp with time zone,timestamp with time zone) line 5 at SQL statement
    SchemaName: orders
    TableName: orderrs
    ColumnName: IsActive
    File: execMain.c
    Line: 1988
    Routine: ExecConstraints
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 13:20:55.643 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 13:20:55.645 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 141.4261ms
2025-07-15 13:20:55.648 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:20:55.649 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 155.1484ms
2025-07-15 13:22:06.356 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 13:22:06.359 +03:00 [INF] CORS policy execution successful.
2025-07-15 13:22:06.360 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:22:06.362 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 13:22:06.380 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42883: function orders.sp_create_item(text, text, numeric, text, timestamp with time zone) does not exist

POSITION: 8
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteScalar(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteScalarImplAsync[T](IDbConnection cnn, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 1241
   at OrderService.Persistence.Repositories.ServiceRepository.CreateItemAsync(String name, String description, Decimal price, String createdBy, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 62
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 32
  Exception data:
    Severity: ERROR
    SqlState: 42883
    MessageText: function orders.sp_create_item(text, text, numeric, text, timestamp with time zone) does not exist
    Hint: No function matches the given name and argument types. You might need to add explicit type casts.
    Position: 8
    File: parse_func.c
    Line: 636
    Routine: ParseFuncOrColumn
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 13:22:06.394 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 13:22:06.396 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 32.0328ms
2025-07-15 13:22:06.399 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:22:06.400 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 44.8661ms
2025-07-15 13:26:19.403 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 13:26:19.407 +03:00 [INF] CORS policy execution successful.
2025-07-15 13:26:19.408 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:26:19.411 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 13:26:19.554 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "item_id" does not exist
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.<ReadMessage>g__ReadMessageSequential|49_0(NpgsqlConnector connector, Boolean async)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteScalar(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteScalarImplAsync[T](IDbConnection cnn, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 1241
   at OrderService.Persistence.Repositories.ServiceRepository.CreateItemAsync(String name, String description, Decimal price, String createdBy, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 62
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 32
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "item_id" does not exist
    Hint: Perhaps you meant to reference the column "Items.ItemId".
    InternalPosition: 194
    InternalQuery: INSERT INTO orders."Items"("Name", "Description", "Price", "CreatedBy", "CreatedDate", "IsActive")
    VALUES (p_name, p_description, p_price, p_created_by, p_created_date, true)
    RETURNING item_id
    Where: PL/pgSQL function sp_create_item(text,text,numeric,text,timestamp with time zone) line 5 at SQL statement
    File: parse_relation.c
    Line: 3732
    Routine: errorMissingColumn
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 13:26:19.569 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 13:26:19.573 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 157.1672ms
2025-07-15 13:26:19.576 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:26:19.578 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 174.8867ms
2025-07-15 13:26:50.392 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 13:26:50.396 +03:00 [INF] CORS policy execution successful.
2025-07-15 13:26:50.397 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:26:50.399 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 13:26:50.422 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42883: function orders.sp_create_order_items(integer, integer, integer, numeric, timestamp with time zone) does not exist

POSITION: 8
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteImplAsync(IDbConnection cnn, CommandDefinition command, Object param) in /_/Dapper/SqlMapper.Async.cs:line 662
   at OrderService.Persistence.Repositories.ServiceRepository.CreateOrderItemAsync(Int32 orderId, Int32 itemId, Int32 quantity, Decimal unitPrice, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 79
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 35
  Exception data:
    Severity: ERROR
    SqlState: 42883
    MessageText: function orders.sp_create_order_items(integer, integer, integer, numeric, timestamp with time zone) does not exist
    Hint: No function matches the given name and argument types. You might need to add explicit type casts.
    Position: 8
    File: parse_func.c
    Line: 636
    Routine: ParseFuncOrColumn
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 13:26:50.439 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 13:26:50.443 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 40.9303ms
2025-07-15 13:26:50.446 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:26:50.449 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 57.4724ms
2025-07-15 13:27:59.518 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 13:27:59.523 +03:00 [INF] CORS policy execution successful.
2025-07-15 13:27:59.525 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:27:59.526 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 13:27:59.535 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42883: function orders.sp_create_item(text, text, numeric, text, timestamp with time zone) does not exist

POSITION: 8
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteScalar(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteScalarImplAsync[T](IDbConnection cnn, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 1241
   at OrderService.Persistence.Repositories.ServiceRepository.CreateItemAsync(String name, String description, Decimal price, String createdBy, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 62
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 32
  Exception data:
    Severity: ERROR
    SqlState: 42883
    MessageText: function orders.sp_create_item(text, text, numeric, text, timestamp with time zone) does not exist
    Hint: No function matches the given name and argument types. You might need to add explicit type casts.
    Position: 8
    File: parse_func.c
    Line: 636
    Routine: ParseFuncOrColumn
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 13:27:59.549 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 13:27:59.551 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 21.5797ms
2025-07-15 13:27:59.554 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:27:59.555 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 36.932ms
2025-07-15 13:30:31.660 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 13:30:31.664 +03:00 [INF] CORS policy execution successful.
2025-07-15 13:30:31.665 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:30:31.667 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 13:30:31.679 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "ItemId" of relation "OrderItems" does not exist
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteImplAsync(IDbConnection cnn, CommandDefinition command, Object param) in /_/Dapper/SqlMapper.Async.cs:line 662
   at OrderService.Persistence.Repositories.ServiceRepository.CreateOrderItemAsync(Int32 orderId, Int32 itemId, Int32 quantity, Decimal unitPrice, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 79
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 35
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "ItemId" of relation "OrderItems" does not exist
    InternalPosition: 44
    InternalQuery: INSERT INTO orders."OrderItems"("OrderId", "ItemId", "Quantity", "UnitPrice", "CreatedDate")
    VALUES (p_order_id, p_item_id, p_quantity, p_unit_price, p_created_date)
    Where: PL/pgSQL function sp_create_order_items(integer,integer,integer,numeric,timestamp with time zone) line 3 at SQL statement
    File: parse_target.c
    Line: 1070
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 13:30:31.691 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 13:30:31.693 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 24.4781ms
2025-07-15 13:30:31.695 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:30:31.696 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 36.7012ms
2025-07-15 13:33:03.282 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 13:33:03.289 +03:00 [INF] CORS policy execution successful.
2025-07-15 13:33:03.290 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:33:03.292 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 13:33:03.512 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 23502: null value in column "IsActive" of relation "ItemsOrder" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteImplAsync(IDbConnection cnn, CommandDefinition command, Object param) in /_/Dapper/SqlMapper.Async.cs:line 662
   at OrderService.Persistence.Repositories.ServiceRepository.CreateOrderItemAsync(Int32 orderId, Int32 itemId, Int32 quantity, Decimal unitPrice, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 79
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 35
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "IsActive" of relation "ItemsOrder" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    Where: SQL statement "INSERT INTO orders."ItemsOrder"("OrderId", "ItemId", "Quantity", "UnitPrice", "CreatedDate")
    VALUES (p_order_id, p_item_id, p_quantity, p_unit_price, p_created_date)"
PL/pgSQL function sp_create_order_items(integer,integer,integer,numeric,timestamp with time zone) line 3 at SQL statement
    SchemaName: orders
    TableName: ItemsOrder
    ColumnName: IsActive
    File: execMain.c
    Line: 1988
    Routine: ExecConstraints
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 13:33:03.524 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 13:33:03.527 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 232.1272ms
2025-07-15 13:33:03.528 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:33:03.530 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 247.3993ms
2025-07-15 13:33:46.854 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 13:33:46.861 +03:00 [INF] CORS policy execution successful.
2025-07-15 13:33:46.863 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:33:46.866 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 13:33:46.891 +03:00 [ERR] Failed to create order
System.Exception: Failed to create order.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "ItemsOrder" violates foreign key constraint "FK_ItemsOrder_Orders_OrderId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.ExecuteImplAsync(IDbConnection cnn, CommandDefinition command, Object param) in /_/Dapper/SqlMapper.Async.cs:line 662
   at OrderService.Persistence.Repositories.ServiceRepository.CreateOrderItemAsync(Int32 orderId, Int32 itemId, Int32 quantity, Decimal unitPrice, DateTime createdDate) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Persistence\Repositories\ServiceRepository.cs:line 79
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 35
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "ItemsOrder" violates foreign key constraint "FK_ItemsOrder_Orders_OrderId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    Where: SQL statement "INSERT INTO orders."ItemsOrder"("OrderId", "ItemId", "Quantity", "UnitPrice", "CreatedDate","IsActive")
    VALUES (p_order_id, p_item_id, p_quantity, p_unit_price, p_created_date,true)"
PL/pgSQL function sp_create_order_items(integer,integer,integer,numeric,timestamp with time zone) line 3 at SQL statement
    SchemaName: orders
    TableName: ItemsOrder
    ConstraintName: FK_ItemsOrder_Orders_OrderId
    File: ri_triggers.c
    Line: 2610
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at OrderService.Business.Services.OrdersService.CreateOrderAsync(CreateOrderRequestDto dto) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.Business\Services\OrdersService.cs:line 48
   at OrderService.API.Controllers.ServiceController.CreateOrder(CreateOrderRequestDto request) in C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API\Controllers\ServiceController.cs:line 27
2025-07-15 13:33:46.916 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-15 13:33:46.918 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 49.4221ms
2025-07-15 13:33:46.920 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:33:46.921 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 500 null application/json; charset=utf-8 67.4433ms
2025-07-15 13:46:38.605 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-15 13:46:39.070 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-15 13:46:39.081 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-15 13:46:39.082 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-07-15 13:46:39.083 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-15 13:46:39.091 +03:00 [INF] Applying migration '20250715104559_addtablesddfdffd'.
2025-07-15 13:46:39.108 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE orders."ItemsOrder" DROP CONSTRAINT "FK_ItemsOrder_Orders_OrderId";
2025-07-15 13:46:39.127 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE orders."ItemsOrder" ADD CONSTRAINT "FK_ItemsOrder_orderrs_OrderId" FOREIGN KEY ("OrderId") REFERENCES orders.orderrs ("OrderId") ON DELETE CASCADE;
2025-07-15 13:46:39.129 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250715104559_addtablesddfdffd', '9.0.6');
2025-07-15 13:46:48.591 +03:00 [INF] User profile is available. Using 'C:\Users\karim.elfil\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-15 13:46:48.759 +03:00 [INF] Now listening on: https://localhost:7096
2025-07-15 13:46:48.762 +03:00 [INF] Now listening on: http://localhost:5102
2025-07-15 13:46:48.835 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-15 13:46:48.836 +03:00 [INF] Hosting environment: Development
2025-07-15 13:46:48.838 +03:00 [INF] Content root path: C:\Users\karim.elfil\Desktop\OrdersProject\OrderService\OrderService.API
2025-07-15 13:46:49.775 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/index.html - null null
2025-07-15 13:46:49.928 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/index.html - 200 null text/html;charset=utf-8 152.8579ms
2025-07-15 13:46:49.960 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - null null
2025-07-15 13:46:49.960 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/_vs/browserLink - null null
2025-07-15 13:46:49.974 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 13.8218ms
2025-07-15 13:46:50.005 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.5065ms
2025-07-15 13:46:50.065 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - null null
2025-07-15 13:46:50.086 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7096/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.9879ms
2025-07-15 13:46:59.727 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7096/api/orders/orders - application/json 273
2025-07-15 13:46:59.752 +03:00 [INF] CORS policy execution successful.
2025-07-15 13:46:59.788 +03:00 [INF] Executing endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:46:59.818 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Service"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderService.Domain.Model.Order.CreateOrderRequestDto) on controller OrderService.API.Controllers.ServiceController (OrderService.API).
2025-07-15 13:47:00.543 +03:00 [INF] Executing OkObjectResult, writing value of type 'OrderService.Domain.Model.Order.CreateOrderResponseDto'.
2025-07-15 13:47:00.554 +03:00 [INF] Executed action OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API) in 726.8065ms
2025-07-15 13:47:00.558 +03:00 [INF] Executed endpoint 'OrderService.API.Controllers.ServiceController.CreateOrder (OrderService.API)'
2025-07-15 13:47:00.562 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7096/api/orders/orders - 200 null application/json; charset=utf-8 835.7836ms
